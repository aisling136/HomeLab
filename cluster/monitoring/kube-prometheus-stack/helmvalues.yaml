cleanPrometheusOperatorObjectNames: true
grafana:
  enabled: false
  forceDeployDashboards: true
  sidecar:
    dashboards:
      annotations:
        grafana_folder: Kubernetes
kubelet:
  enabled: true
  serviceMonitor:
    metricRelabelings:
      # Drop high cardinality labels
      - action: labeldrop
        regex: (uid)
      - action: labeldrop
        regex: (id|name)
      - action: drop
        sourceLabels: ["__name__"]
        regex: (rest_client_request_duration_seconds_bucket|rest_client_request_duration_seconds_sum|rest_client_request_duration_seconds_count)
kubeApiServer:
  enabled: true
  tlsConfig:
    insecureSkipVerify: true
  serviceMonitor:
    metricRelabelings:
      # Drop high cardinality labels
      - action: drop
        sourceLabels: ["__name__"]
        regex: (apiserver|etcd|rest_client)_request(|_sli|_slo)_duration_seconds_bucket
      - action: drop
        sourceLabels: ["__name__"]
        regex: (apiserver_response_sizes_bucket|apiserver_watch_events_sizes_bucket)
kubeEtcd:
  enabled: true
  endpoints: &endpoints
    - 192.168.1.231
    - 192.168.1.232
    - 192.168.1.233
kubeControllerManager:
  enabled: true
  endpoints: *endpoints
kubeScheduler:
  enabled: true
  endpoints: *endpoints
kubeProxy:
  enabled: false
prometheus:
  prometheusSpec:
    ruleSelectorNilUsesHelmValues: false
    serviceMonitorSelectorNilUsesHelmValues: false
    podMonitorSelectorNilUsesHelmValues: false
    probeSelectorNilUsesHelmValues: false
    retention: 2d
    retentionSize: 40GB
    resources:
      requests:
        cpu: 275m
        memory: 4800Mi
    storageSpec:
      volumeClaimTemplate:
        spec:
          storageClassName: longhorn
          accessModes:
            - "ReadWriteOnce"
          resources:
            requests:
              storage: 80Gi
  ingress:
    enabled: true
    ingressClassName: internal
    annotations:
      hajimari.io/enable: "true"
      hajimari.io/icon: text-box-search
      hajimari.io/appName: "Prometheus"
    hosts:
      - &host prometheus.dex136.xyz
    tls:
      - hosts:
          - *host
alertmanager:
  config:
    receivers:
    - name: 'discord_webhook'
      webhook_configs:
      - url: 'http://alertmanager-discord.monitoring:9094'
    - name: 'null'
    route:
      group_by: ['alertname']
      group_wait: 20s
      group_interval: 5m
      repeat_interval: 6h
      receiver: discord_webhook
      routes:
        - receiver: "null"
          match:
            alertname: Watchdog
        - receiver: "null"
          match:
            alertname: InfoInhibitor
        - receiver: "discord_webhook"
          continue: true
  ingress:
    enabled: true
    ingressClassName: internal
    annotations:
      hajimari.io/enable: "true"
      hajimari.io/icon: alert
      hajimari.io/appName: "Alert Manager"
    hosts:
      - &host alertmanager.dex136.xyz
    tls:
      - hosts:
          - *host
