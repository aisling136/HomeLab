app-template:
  controllers:
    recyclarr:
      type: cronjob
      cronjob:
        schedule: 0 0 * * *
        backoffLimit: 0
        concurrencyPolicy: Forbid
        successfulJobsHistory: 1
        failedJobsHistory: 1
        ttlSecondsAfterFinished: 86400
      containers:
        recyclarr:
          image:
            repository: ghcr.io/recyclarr/recyclarr
            tag: 8.3.2@sha256:55afe316d3e4e4e3b9120cef7c79436b1b5311f6a18d4ef4b7653e720499c90a
          env:
            RECYCLARR_DATA_DIR: /tmp
          envFrom: &envFrom
            - secretRef:
                name: recyclarr-secret
          args:
            - sync
          securityContext:
            allowPrivilegeEscalation: false
            readOnlyRootFilesystem: true
            capabilities: { drop: ["ALL"] }
          resources:
            requests:
              cpu: 10m
            limits:
              memory: 512Mi
      pod:
        securityContext:
          runAsUser: 10000
          runAsGroup: 10000
          runAsNonRoot: true
          fsGroup: 10000
          fsGroupChangePolicy: OnRootMismatch
  persistence:
    config:
      existingClaim: recyclarr
    config-file:
      type: configMap
      name: recyclarr-configmap
      globalMounts:
        - path: /config/recyclarr.yaml
          subPath: recyclarr.yaml
          readOnly: true
    tmp:
      type: emptyDir
